{
    "flask_app/app.py": "\nimport os\nfrom flask import Flask, render_template, redirect, url_for, request, flash\nfrom flask_login import LoginManager, login_required, logout_user, login_user, current_user\nfrom auth import authenticate_user, register_user\nfrom flask_migrate import Migrate\nfrom models import db, User, init_db\nfrom config import Config\n\n# ================== 配置区域 ==================\n# Define the base path of the app\nbase_path = os.path.abspath(os.path.dirname(__file__))\n\n# Folder paths\nTEMPLATES_FOLDER = os.path.join(base_path, 'templates')\nSTATIC_FOLDER = os.path.join(base_path, 'static')\nprint('TEMPLATES_FOLDER:', TEMPLATES_FOLDER)\nprint('STATIC_FOLDER:', STATIC_FOLDER)\n\n# ================== 初始化区域 ==================\n# Initialize Flask app with template and static folder paths\napp = Flask(__name__, template_folder=TEMPLATES_FOLDER, static_folder=STATIC_FOLDER)\napp.config.from_object(Config)\n\n\n# Initialize database\ndb.init_app(app)\n\n# Initialize Flask-Migrate\nmigrate = Migrate(app, db)\n\n# Initialize LoginManager\nlogin_manager = LoginManager()\nlogin_manager.init_app(app)\nlogin_manager.login_view = 'login'\n\n# User loader callback\n@login_manager.user_loader\ndef load_user(user_id):\n    return User.query.get(int(user_id))\n\n@app.before_first_request\ndef create_tables():\n    init_db(app)\n\n# Root route\n@app.route('/')\ndef home():\n    return render_template('index.html')  \n\n# Register page route\n@app.route('/register', methods=['GET', 'POST'])\ndef register():\n    if request.method == 'POST':\n        username = request.form['username']\n        email = request.form['email']\n        password = request.form['password']\n        password2 = request.form['password2']\n\n        # Check if passwords match\n        if password != password2:\n            flash('Passwords do not match', 'danger')\n            return redirect(url_for('register'))\n\n        # Register the user\n        if register_user(username, email, password):\n            flash('Account created successfully! You can now login.', 'success')\n            return redirect(url_for('login'))\n        else:\n            flash('User already exists.', 'danger')\n            return redirect(url_for('register'))\n\n    return render_template('register.html')\n\n# Login page route\n@app.route('/login', methods=['GET', 'POST'])\ndef login():\n    if request.method == 'POST':\n        username = request.form['username']\n        password = request.form['password']\n        remember = 'remember' in request.form  # True if checkbox is checked\n        user = authenticate_user(username, password)\n        if user:\n            login_user(user, remember=remember)  # Pass 'remember' to login_user\n            return redirect(url_for('dashboard'))\n        else:\n            flash('Invalid username or password', 'danger')  # Flash error message\n    return render_template('login.html')\n\n# Logout route\n@app.route('/logout')\n@login_required\ndef logout():\n    logout_user()\n    return redirect(url_for('login'))\n\n# Protected page (only accessible by logged-in users)\n@app.route('/dashboard')\n@login_required\ndef dashboard():\n    return render_template('dashboard.html', username=current_user.username)\n\nif __name__ == '__main__':\n    app.run(debug=True)\n",
    "flask_app/app_files.json": "[\n    \"flask_app/app.py\",\n    \"flask_app/app_files.json\",\n    \"flask_app/auth.py\",\n    \"flask_app/config.py\",\n    \"flask_app/models.py\",\n    \"flask_app/requirements.txt\",\n    \"flask_app/static/style.css\",\n    \"flask_app/templates/dashboard.html\",\n    \"flask_app/templates/index.html\",\n    \"flask_app/templates/login.html\"\n]",
    "flask_app/auth.py": "from flask_login import login_user\nfrom werkzeug.security import check_password_hash, generate_password_hash\nfrom flask import flash\nfrom models import User, db\n\n# Authentication logic\ndef authenticate_user(username, password):\n    user = User.query.filter_by(username=username).first()\n    if user and user.check_password(password):\n        return user  # Return the user object\n    return None  # Return None if authentication fails\n\n# Registration logic\ndef register_user(username, email, password):\n    # Check if the user already exists\n    if User.query.filter_by(username=username).first() or User.query.filter_by(email=email).first():\n        return False  # User already exists\n\n    # Create a new user\n    user = User(username=username, email=email)\n    user.set_password(password)  # Set the password using hash\n    db.session.add(user)\n    db.session.commit()  # Save the new user in the database\n    return True\n",
    "flask_app/config.py": "import os\nfrom datetime import timedelta\n\nclass Config:\n    SECRET_KEY = os.urandom(24)  # Used for encrypting sessions and tokens\n    SQLALCHEMY_DATABASE_URI = 'sqlite:///site.db'  # SQLite database path\n    SQLALCHEMY_TRACK_MODIFICATIONS = False  # Disable SQLAlchemy's object modification tracking\n    SESSION_COOKIE_NAME = 'flask_session_cookie'  # Custom cookie name\n    REMEMBER_COOKIE_DURATION = timedelta(days=30)",
    "flask_app/models.py": "\nfrom flask_sqlalchemy import SQLAlchemy\nfrom werkzeug.security import generate_password_hash, check_password_hash\nfrom flask_login import UserMixin\n\n# Initialize the SQLAlchemy instance\ndb = SQLAlchemy()\n\n# User model\nclass User(UserMixin, db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    username = db.Column(db.String(120), unique=True, nullable=False)\n    email = db.Column(db.String(120), unique=True, nullable=False)\n    password_hash = db.Column(db.String(128), nullable=False)\n\n    def __repr__(self):\n        return f\"User('{self.username}', '{self.email}')\"\n\n    # Set password (hash the password)\n    def set_password(self, password):\n        self.password_hash = generate_password_hash(password)\n\n    # Check password (validate if the entered password is correct)\n    def check_password(self, password):\n        return check_password_hash(self.password_hash, password)\n\n# Initialize database (create tables)\ndef init_db(app):\n    with app.app_context():\n        db.create_all()  # This creates the tables in the database\n",
    "flask_app/requirements.txt": "\nFlask==2.0.3\nFlask-Login==0.5.0\nFlask-SQLAlchemy==2.5.1\nFlask-Migrate==3.1.0\nWerkzeug==2.0.3\n",
    "flask_app/static/css/global.css": "/* 基本样式重置 */\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: 'Arial', sans-serif;\n}\n\nbody {\n    background: linear-gradient(135deg, #000000, #434343);\n    color: #ffffff;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    margin: 0;\n}\n\n/* 容器样式 */\n.container {\n    background: rgba(255, 255, 255, 0.1);\n    border-radius: 15px;\n    box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);\n    padding: 30px;\n    width: 100%;\n    max-width: 600px;\n    text-align: center;\n    border: 2px solid rgba(255, 255, 255, 0.3);\n    backdrop-filter: blur(10px);\n}\n\n/* 标题样式 */\nh1, h2 {\n    font-weight: bold;\n    text-transform: uppercase;\n    letter-spacing: 2px;\n    margin-bottom: 20px;\n}\n\n/* 输入框样式 */\n.input-group {\n    margin-bottom: 15px;\n    text-align: left;\n}\n\n.input-group label {\n    display: block;\n    margin-bottom: 5px;\n    font-size: 14px;\n    color: #ffffff;\n}\n\n.input-group input, .input-group select {\n    width: 100%;\n    padding: 10px;\n    border: none;\n    border-radius: 5px;\n    background: rgba(255, 255, 255, 0.2);\n    color: #ffffff;\n    font-size: 16px;\n    outline: none;\n}\n\n.input-group input:focus, .input-group select:focus {\n    background: rgba(255, 255, 255, 0.3);\n}\n\n/* 按钮样式 */\n.btn {\n    width: 100%;\n    padding: 10px;\n    border: none;\n    border-radius: 5px;\n    background: #007bff;\n    color: #ffffff;\n    font-size: 16px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n}\n\n.btn:hover {\n    background: #0056b3;\n}\n\n/* 链接样式 */\n.link {\n    font-size: 14px;\n    margin-top: 15px;\n}\n\n.link a {\n    color: #007bff;\n    text-decoration: none;\n    transition: color 0.3s ease;\n}\n\n.link a:hover {\n    color: #0056b3;\n}\n\n/* 闪现消息样式 */\n.flash-message {\n    margin-top: 10px;\n    font-size: 14px;\n    color: red;\n}",
    "flask_app/static/css/index.css": "/* 基本样式重置 */\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: 'Arial', sans-serif;\n}\n\nbody {\n    background: linear-gradient(135deg, #000000, #434343);\n    color: #ffffff;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    margin: 0;\n}\n\n.home-container {\n    text-align: center;\n    max-width: 600px;\n    margin: auto;\n    padding: 20px;\n    border-radius: 15px;\n    background: rgba(255, 255, 255, 0.1);\n    box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);\n    border: 2px solid rgba(255, 255, 255, 0.3);\n    backdrop-filter: blur(10px);\n}\n\n.home-container h1 {\n    font-size: 36px;\n    font-weight: bold;\n    margin-bottom: 20px;\n    text-transform: uppercase;\n    letter-spacing: 2px;\n}\n\n.login-link {\n    display: inline-block;\n    padding: 10px 20px;\n    border: 2px solid #007bff;\n    border-radius: 5px;\n    color: #ffffff;\n    text-decoration: none;\n    font-size: 18px;\n    transition: background-color 0.3s ease, color 0.3s ease;\n}\n\n.login-link:hover {\n    background-color: #007bff;\n    color: #ffffff;\n}",
    "flask_app/static/css/login.css": "/* 基本样式重置 */\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: 'Arial', sans-serif;\n}\n\nbody {\n    background: linear-gradient(135deg, #000000, #434343);\n    color: #ffffff;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    margin: 0;\n}\n\n.login-container {\n    background: rgba(255, 255, 255, 0.1);\n    border-radius: 15px;\n    box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);\n    padding: 30px;\n    width: 350px;\n    text-align: center;\n    border: 2px solid rgba(255, 255, 255, 0.3);\n    backdrop-filter: blur(10px);\n}\n\n.login-container h2 {\n    margin-bottom: 20px;\n    font-size: 24px;\n    font-weight: bold;\n    text-transform: uppercase;\n    letter-spacing: 2px;\n}\n\n.input-group {\n    margin-bottom: 15px;\n    text-align: left;\n}\n\n.input-group label {\n    display: block;\n    margin-bottom: 5px;\n    font-size: 14px;\n    color: #ffffff;\n}\n\n.input-group input {\n    width: 100%;\n    padding: 10px;\n    border: none;\n    border-radius: 5px;\n    background: rgba(255, 255, 255, 0.2);\n    color: #ffffff;\n    font-size: 16px;\n    outline: none;\n}\n\n.input-group input:focus {\n    background: rgba(255, 255, 255, 0.3);\n}\n\n.remember-group {\n    text-align: left;\n    margin-bottom: 15px;\n}\n\n.remember-group label {\n    font-size: 14px;\n    color: #ffffff;\n}\n\n.remember-group input {\n    margin-right: 5px;\n}\n\n.login-btn {\n    width: 100%;\n    padding: 10px;\n    border: none;\n    border-radius: 5px;\n    background: #007bff;\n    color: #ffffff;\n    font-size: 16px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n}\n\n.login-btn:hover {\n    background: #0056b3;\n}\n\n.register-link {\n    font-size: 14px;\n    margin-top: 15px;\n}\n\n.register-link a {\n    color: #007bff;\n    text-decoration: none;\n    transition: color 0.3s ease;\n}\n\n.register-link a:hover {\n    color: #0056b3;\n}\n\n.flash-message {\n    margin-top: 10px;\n    font-size: 14px;\n}",
    "flask_app/static/css/register.css": "/* 基本样式重置 */\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: 'Arial', sans-serif;\n}\n\nbody {\n    background: linear-gradient(135deg, #000000, #434343);\n    color: #ffffff;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    margin: 0;\n}\n\n.register-container {\n    background: rgba(255, 255, 255, 0.1);\n    border-radius: 15px;\n    box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);\n    padding: 30px;\n    width: 400px;\n    text-align: center;\n    border: 2px solid rgba(255, 255, 255, 0.3);\n    backdrop-filter: blur(10px);\n}\n\n.register-container h2 {\n    font-size: 24px;\n    font-weight: bold;\n    margin-bottom: 20px;\n    text-transform: uppercase;\n    letter-spacing: 2px;\n}\n\n.input-group {\n    margin-bottom: 15px;\n    text-align: left;\n}\n\n.input-group label {\n    display: block;\n    margin-bottom: 5px;\n    font-size: 14px;\n    color: #ffffff;\n}\n\n.input-group input {\n    width: 100%;\n    padding: 10px;\n    border: none;\n    border-radius: 5px;\n    background: rgba(255, 255, 255, 0.2);\n    color: #ffffff;\n    font-size: 16px;\n    outline: none;\n}\n\n.input-group input:focus {\n    background: rgba(255, 255, 255, 0.3);\n}\n\n.register-btn {\n    width: 100%;\n    padding: 10px;\n    border: none;\n    border-radius: 5px;\n    background: #007bff;\n    color: #ffffff;\n    font-size: 16px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n}\n\n.register-btn:hover {\n    background: #0056b3;\n}\n\n.login-link {\n    font-size: 14px;\n    margin-top: 15px;\n}\n\n.login-link a {\n    color: #007bff;\n    text-decoration: none;\n    transition: color 0.3s ease;\n}\n\n.login-link a:hover {\n    color: #0056b3;\n}\n\n.flash-message {\n    margin-top: 10px;\n    font-size: 14px;\n}",
    "flask_app/templates/dashboard.html": "\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Dashboard</title>\n    <link rel=\"stylesheet\" href=\"{{ url_for('static', filename='css/global.css') }}\">\n</head>\n<body>\n    <h2>Welcome, {{ username }}!</h2>\n    <p>This is your protected dashboard.</p>\n    <a href=\"{{ url_for('logout') }}\">Logout</a>\n</body>\n</html>\n",
    "flask_app/templates/index.html": "<!-- \n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Home Page</title>\n</head>\n<body>\n    <h1>Welcome to the Stock Monitor App!</h1>\n    <a href=\"{{ url_for('login') }}\">Login</a>\n</body>\n</html> -->\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Home Page</title>\n    <link rel=\"stylesheet\" href=\"{{ url_for('static', filename='css/global.css') }}\">\n    <link rel=\"stylesheet\" href=\"{{ url_for('static', filename='/css/index.css') }}\">\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css\">\n</head>\n<body>\n    <div class=\"home-container\">\n        <h1>Welcome to the Stock Monitor App!</h1>\n        <a href=\"{{ url_for('login') }}\" class=\"login-link\">Login</a>\n    </div>\n</body>\n</html>",
    "flask_app/templates/login.html": "<!-- <!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Login</title>\n    <link rel=\"stylesheet\" href=\"{{ url_for('static', filename='style.css') }}\">\n</head>\n<body>\n    <div class=\"login-container\">\n        <h2>Login</h2>\n        <form method=\"POST\">\n            <div class=\"input-group\">\n                <label for=\"username\">Username</label>\n                <input type=\"text\" id=\"username\" name=\"username\" placeholder=\"Enter your username\" required>\n            </div>\n            <div class=\"input-group\">\n                <label for=\"password\">Password</label>\n                <input type=\"password\" id=\"password\" name=\"password\" placeholder=\"Enter your password\" required>\n            </div>\n            <div class=\"remember-group\">\n                <label>\n                    <input type=\"checkbox\" name=\"remember\" id=\"remember\"> \n                    Remember Me\n                </label>\n            </div>\n            <button type=\"submit\" class=\"login-btn\">Login</button>\n        </form>\n        <p class=\"register-link\">Don't have an account? <a href=\"{{ url_for('register') }}\">Register here</a></p>\n        <p class=\"flash-message\" style=\"color:red\">{{ get_flashed_messages() }}</p>\n    </div>\n</body>\n</html> -->\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Login</title>\n    <link rel=\"stylesheet\" href=\"{{ url_for('static', filename='css/global.css') }}\">\n    <link rel=\"stylesheet\" href=\"{{ url_for('static', filename='/css/login.css') }}\">\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css\">\n</head>\n<body>\n    <div class=\"login-container\">\n        <h2>Login</h2>\n        <form method=\"POST\">\n            <div class=\"input-group\">\n                <label for=\"username\">Username</label>\n                <input type=\"text\" id=\"username\" name=\"username\" placeholder=\"Enter your username\" required>\n            </div>\n            <div class=\"input-group\">\n                <label for=\"password\">Password</label>\n                <input type=\"password\" id=\"password\" name=\"password\" placeholder=\"Enter your password\" required>\n            </div>\n            <div class=\"remember-group\">\n                <label>\n                    <input type=\"checkbox\" name=\"remember\" id=\"remember\"> \n                    Remember Me\n                </label>\n            </div>\n            <button type=\"submit\" class=\"login-btn\">Login</button>\n        </form>\n        <p class=\"register-link\">Don't have an account? <a href=\"{{ url_for('register') }}\">Register here</a></p>\n        <p class=\"flash-message\" style=\"color:red\">{{ get_flashed_messages() }}</p>\n    </div>\n</body>\n</html>",
    "flask_app/templates/register.html": "<!-- <!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Register</title>\n    <link rel=\"stylesheet\" href=\"{{ url_for('static', filename='/css/style.css') }}\">\n</head>\n<body>\n    <h2>Create an Account</h2>\n    <form method=\"POST\">\n        <label for=\"username\">Username</label>\n        <input type=\"text\" id=\"username\" name=\"username\" placeholder=\"Enter your username\" required><br><br>\n\n        <label for=\"email\">Email</label>\n        <input type=\"email\" id=\"email\" name=\"email\" placeholder=\"Enter your email\" required><br><br>\n\n        <label for=\"password\">Password</label>\n        <input type=\"password\" id=\"password\" name=\"password\" placeholder=\"Enter your password\" required><br><br>\n\n        <label for=\"password2\">Confirm Password</label>\n        <input type=\"password\" id=\"password2\" name=\"password2\" placeholder=\"Confirm your password\" required><br><br>\n\n        <button type=\"submit\">Register</button>\n    </form>\n    <p style=\"color:red\">{{ get_flashed_messages() }}</p>\n</body>\n</html> -->\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Register</title>\n    <link rel=\"stylesheet\" href=\"{{ url_for('static', filename='css/global.css') }}\">\n    <link rel=\"stylesheet\" href=\"{{ url_for('static', filename='/css/register.css') }}\">\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css\">\n</head>\n<body>\n    <div class=\"register-container\">\n        <h2>Create an Account</h2>\n        <form method=\"POST\">\n            <div class=\"input-group\">\n                <label for=\"username\">Username</label>\n                <input type=\"text\" id=\"username\" name=\"username\" placeholder=\"Enter your username\" required>\n            </div>\n            <div class=\"input-group\">\n                <label for=\"email\">Email</label>\n                <input type=\"email\" id=\"email\" name=\"email\" placeholder=\"Enter your email\" required>\n            </div>\n            <div class=\"input-group\">\n                <label for=\"password\">Password</label>\n                <input type=\"password\" id=\"password\" name=\"password\" placeholder=\"Enter your password\" required>\n            </div>\n            <div class=\"input-group\">\n                <label for=\"password2\">Confirm Password</label>\n                <input type=\"password\" id=\"password2\" name=\"password2\" placeholder=\"Confirm your password\" required>\n            </div>\n            <button type=\"submit\" class=\"register-btn\">Register</button>\n        </form>\n        <p class=\"login-link\">Already have an account? <a href=\"{{ url_for('login') }}\">Login here</a></p>\n        <p class=\"flash-message\" style=\"color:red\">{{ get_flashed_messages() }}</p>\n    </div>\n</body>\n</html>"
}